<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoko Li - Investor Dossier</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 12px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .last-updated {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        .btn-download {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn-download:hover { background: var(--primary-dark); }
        .btn-download svg { width: 18px; height: 18px; }

        .dossier {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            padding: 48px;
        }

        /* Profile Header */
        .profile-header {
            display: flex;
            gap: 24px;
            padding-bottom: 32px;
            border-bottom: 2px solid var(--gray-200);
            margin-bottom: 40px;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.25rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
            overflow: hidden;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info { flex: 1; }
        .profile-name { font-size: 2rem; font-weight: 700; margin-bottom: 4px; color: var(--gray-900); }
        .profile-role { font-size: 1.1rem; color: var(--gray-600); margin-bottom: 16px; }

        .profile-links { display: flex; flex-wrap: wrap; gap: 10px; }

        .profile-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: var(--gray-100);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--gray-800);
            text-decoration: none;
            transition: all 0.15s;
            font-weight: 500;
        }

        .profile-link:hover { background: var(--gray-200); color: var(--primary); }
        .profile-link svg { width: 16px; height: 16px; }

        .profile-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 24px;
            padding: 20px;
            background: var(--gray-50);
            border-radius: 12px;
        }

        .meta-item { text-align: center; }
        .meta-label { font-size: 0.75rem; color: var(--gray-600); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px; }
        .meta-value { font-size: 1rem; font-weight: 600; color: var(--gray-900); }

        /* Content Styles */
        h2 {
            font-size: 1.5rem;
            margin-top: 48px;
            margin-bottom: 20px;
            color: var(--gray-900);
            border-bottom: 2px solid var(--gray-200);
            padding-bottom: 12px;
        }

        h3 {
            font-size: 1.2rem;
            margin-top: 32px;
            margin-bottom: 12px;
            color: var(--gray-800);
        }

        h4 {
            font-size: 1.05rem;
            margin-top: 24px;
            margin-bottom: 10px;
            color: var(--gray-700);
        }

        p { margin-bottom: 16px; }

        a { color: var(--primary); text-decoration: none; }
        a:hover { text-decoration: underline; }

        ul, ol { margin-bottom: 16px; padding-left: 24px; }
        li { margin-bottom: 8px; }

        blockquote {
            border-left: 4px solid var(--primary);
            margin: 24px 0;
            padding: 16px 24px;
            background: #eff6ff;
            border-radius: 0 12px 12px 0;
            font-style: italic;
        }

        blockquote p { margin-bottom: 0; }
        blockquote cite { display: block; margin-top: 8px; font-style: normal; font-size: 0.9rem; color: var(--gray-600); }

        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        th, td {
            border: 1px solid var(--gray-200);
            padding: 12px 16px;
            text-align: left;
        }

        th { background: var(--gray-50); font-weight: 600; color: var(--gray-900); }
        tr:hover { background: var(--gray-50); }

        strong { font-weight: 600; }
        em { font-style: italic; }

        .checklist { list-style: none; padding-left: 0; }
        .checklist li { padding-left: 28px; position: relative; }
        .checklist li::before { content: "☐"; position: absolute; left: 0; color: var(--gray-600); }

        .tag {
            display: inline-block;
            padding: 4px 10px;
            background: var(--gray-100);
            border-radius: 6px;
            font-size: 0.85rem;
            margin-right: 6px;
            margin-bottom: 6px;
        }

        .section-intro {
            font-size: 1.05rem;
            color: var(--gray-600);
            margin-bottom: 24px;
            font-style: italic;
        }

        @media print {
            body { background: white; }
            .container { padding: 0; }
            .dossier { box-shadow: none; padding: 24px; }
            a { color: var(--primary); text-decoration: underline; }
            h2 { page-break-after: avoid; }
            table, blockquote { page-break-inside: avoid; }
            #positioning-upload, #positioning-analyzing, #positioning-error { display: none !important; }

            /* Positioning section print styles */
            .results-header { page-break-after: avoid; }
            .score-card { page-break-inside: avoid; }
            .result-section { page-break-inside: avoid; }
            .alignment-card, .concern-card, .question-card, .analogy-card {
                page-break-inside: avoid;
                overflow: visible !important;
            }
            .language-grid { page-break-inside: avoid; }
            .results-actions { display: none !important; }
            #positioning-results { overflow: visible !important; }
        }

        /* PDF generation specific overrides */
        .pdf-rendering,
        .pdf-rendering * {
            overflow: visible !important;
            max-height: none !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }

        .pdf-rendering .positioning-state,
        .pdf-rendering .result-section,
        .pdf-rendering .alignment-card,
        .pdf-rendering .concern-card,
        .pdf-rendering .question-card,
        .pdf-rendering .analogy-card,
        .pdf-rendering .score-card,
        .pdf-rendering .language-grid,
        .pdf-rendering #positioning-results {
            overflow: visible !important;
            max-height: none !important;
            height: auto !important;
        }

        /* Remove problematic styles for PDF rendering */
        .pdf-rendering .score-card {
            background: #f0f9ff !important;
            box-shadow: none !important;
        }

        .pdf-rendering .score-circle {
            box-shadow: none !important;
            border: 2px solid var(--primary) !important;
            background: white !important;
        }

        .pdf-rendering .dossier {
            box-shadow: none !important;
        }

        .pdf-rendering .alignment-card,
        .pdf-rendering .concern-card,
        .pdf-rendering .question-card,
        .pdf-rendering .analogy-card {
            box-shadow: none !important;
            border: 1px solid #e5e7eb !important;
            background: #f9fafb !important;
            break-inside: avoid !important;
            page-break-inside: avoid !important;
            margin-bottom: 16px !important;
        }

        .pdf-rendering .result-section {
            break-inside: auto !important;
            page-break-inside: auto !important;
            margin-bottom: 24px !important;
            padding-bottom: 20px !important;
        }

        .pdf-rendering .result-section h4 {
            break-after: avoid !important;
            page-break-after: avoid !important;
            margin-top: 16px !important;
        }

        .pdf-rendering h2 {
            break-before: auto !important;
            break-after: avoid !important;
            page-break-after: avoid !important;
        }

        .pdf-rendering h3,
        .pdf-rendering h4,
        .pdf-rendering h5 {
            break-after: avoid !important;
            page-break-after: avoid !important;
        }

        .pdf-rendering .tag-use,
        .pdf-rendering .tag-avoid {
            display: inline-block !important;
            margin-bottom: 4px !important;
        }

        .pdf-rendering .language-grid {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
        }

        .pdf-rendering .mitigation,
        .pdf-rendering .response {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
        }

        .pdf-rendering blockquote {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
        }

        .pdf-rendering #positioning-container {
            break-before: always !important;
            page-break-before: always !important;
        }

        /* Positioning Section Styles */
        .positioning-state { margin-top: 24px; }

        .upload-zone {
            border: 2px dashed var(--gray-200);
            border-radius: 12px;
            padding: 48px 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--gray-50);
        }

        .upload-zone:hover, .upload-zone.dragover {
            border-color: var(--primary);
            background: #eff6ff;
        }

        .upload-icon { color: var(--gray-600); margin-bottom: 16px; }
        .upload-text { font-size: 1.1rem; font-weight: 500; color: var(--gray-800); margin-bottom: 4px; }
        .upload-subtext { font-size: 0.9rem; color: var(--gray-600); }

        .upload-form { margin-top: 20px; }

        .file-preview {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--gray-100);
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .file-preview svg { color: var(--primary); flex-shrink: 0; }
        .file-preview span { flex: 1; font-weight: 500; }

        .btn-remove {
            background: none;
            border: none;
            color: var(--gray-600);
            cursor: pointer;
            font-size: 0.85rem;
            padding: 4px 8px;
        }
        .btn-remove:hover { color: #dc2626; }

        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 6px; font-size: 0.9rem; }
        .form-group input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.15s;
        }
        .form-group input:focus { outline: none; border-color: var(--primary); }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
        }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-primary:disabled { background: var(--gray-200); cursor: not-allowed; }

        .btn-secondary {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: white;
            color: var(--gray-800);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
        }
        .btn-secondary:hover { background: var(--gray-50); border-color: var(--gray-300); }

        .btn-upload { width: 100%; justify-content: center; }

        /* Analyzing State */
        .analyzing-container {
            text-align: center;
            padding: 48px 24px;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--gray-200);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 24px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .analyzing-text { font-size: 1.1rem; font-weight: 500; color: var(--gray-800); margin-bottom: 8px; }
        .analyzing-subtext { font-size: 0.9rem; color: var(--gray-600); }

        /* Results State */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--gray-200);
        }

        .results-meta { display: flex; gap: 8px; flex-wrap: wrap; }

        .company-badge, .file-badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .company-badge { background: #dbeafe; color: #1e40af; }
        .file-badge { background: var(--gray-100); color: var(--gray-600); }

        .results-actions { display: flex; gap: 8px; }

        .score-card {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 24px;
            background: linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%);
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        .score-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
        }

        .score-info h4 { margin: 0 0 8px; font-size: 1rem; }
        .score-info p { margin: 0; color: var(--gray-600); font-size: 0.95rem; }

        .result-section {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--gray-100);
        }

        .result-section:last-child { border-bottom: none; }

        .result-section h4 {
            margin-top: 0;
            margin-bottom: 16px;
            color: var(--gray-900);
        }

        .result-section h5 {
            margin: 16px 0 8px;
            font-size: 0.9rem;
            color: var(--gray-700);
        }

        .alignment-card, .concern-card, .question-card, .analogy-card {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .alignment-card h5, .concern-card h5, .question-card h5, .analogy-card h5 {
            margin: 0 0 8px;
            font-size: 1rem;
            color: var(--gray-900);
        }

        .alignment-card p, .concern-card p, .question-card p, .analogy-card p {
            margin: 0;
            font-size: 0.95rem;
            color: var(--gray-700);
        }

        .alignment-card .evidence {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--gray-200);
            font-style: italic;
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .concern-card .mitigation {
            margin-top: 12px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #22c55e;
        }

        .concern-card .mitigation-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #22c55e;
            margin-bottom: 4px;
        }

        .question-card .response {
            margin-top: 12px;
            padding: 12px;
            background: white;
            border-radius: 6px;
        }

        .question-card .response-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .language-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 16px;
        }

        .label-use { color: #22c55e; }
        .label-avoid { color: #dc2626; }

        .tag-list { display: flex; flex-wrap: wrap; gap: 8px; }

        .tag-use {
            background: #dcfce7;
            color: #166534;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .tag-avoid {
            background: #fee2e2;
            color: #991b1b;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        /* Error State */
        .error-container {
            text-align: center;
            padding: 48px 24px;
        }

        .error-container svg { color: #dc2626; margin-bottom: 16px; }
        .error-text { font-size: 1.1rem; color: var(--gray-800); margin-bottom: 24px; }

        @media (max-width: 640px) {
            .upload-zone { padding: 32px 16px; }
            .results-header { flex-direction: column; align-items: flex-start; }
            .results-actions { width: 100%; }
            .results-actions button { flex: 1; justify-content: center; }
            .score-card { flex-direction: column; text-align: center; }
            .language-grid { grid-template-columns: 1fr; }
        }

        .table-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 20px 0;
        }

        .table-scroll table {
            margin: 0;
        }

        @media (max-width: 640px) {
            .container { padding: 16px; }
            .toolbar {
                flex-direction: column;
                gap: 12px;
                text-align: center;
                padding: 16px;
            }
            .profile-header { flex-direction: column; text-align: center; }
            .profile-avatar { width: 80px; height: 80px; font-size: 1.75rem; margin: 0 auto; }
            .profile-name { font-size: 1.5rem; }
            .profile-role { font-size: 1rem; }
            .profile-links { justify-content: center; }
            .profile-link { padding: 6px 12px; font-size: 0.85rem; }
            .profile-meta { grid-template-columns: 1fr; }
            .dossier { padding: 20px; }
            h2 { font-size: 1.25rem; margin-top: 32px; }
            h3 { font-size: 1.1rem; margin-top: 24px; }
            h4 { font-size: 1rem; }
            .table-scroll { margin: 16px -20px; padding: 0 20px; }
            table { font-size: 0.8rem; min-width: 480px; }
            th, td { padding: 8px 10px; }
            blockquote { padding: 12px 16px; margin: 16px 0; font-size: 0.95rem; }
            ul, ol { padding-left: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="toolbar">
            <span class="last-updated">Last updated: January 30, 2026</span>
            <button class="btn-download" onclick="downloadPDF()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                Download PDF
            </button>
        </div>
        <div class="dossier" id="dossier-content">
            <!-- Profile Header -->
            <header class="profile-header">
                <div class="profile-avatar"><img src="https://d1lamhf6l6yk6d.cloudfront.net/uploads/2023/04/Yoko-Li-2.png" alt="Yoko Li"></div>
                <div class="profile-info">
                    <h1 class="profile-name">Yoko Li</h1>
                    <p class="profile-role">Partner · AI & Infrastructure · Andreessen Horowitz (a16z)</p>
                    <div class="profile-links">
                        <a href="mailto:yli@a16z.com" class="profile-link">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            Email
                        </a>
                        <a href="https://www.linkedin.com/in/yokoli/" target="_blank" class="profile-link">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            LinkedIn
                        </a>
                        <a href="https://x.com/stuffyokodraws" target="_blank" class="profile-link">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            Twitter
                        </a>
                        <a href="https://github.com/ykhli" target="_blank" class="profile-link">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                            GitHub
                        </a>
                        <a href="https://a16z.com/author/yoko-li/" target="_blank" class="profile-link">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" /></svg>
                            Portfolio
                        </a>
                    </div>
                    <div class="profile-meta">
                        <div class="meta-item">
                            <div class="meta-label">Investment Focus</div>
                            <div class="meta-value">Dev Tools · Infra · AI</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-label">Stage</div>
                            <div class="meta-value">Pre-seed → Series B</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-label">Check Size</div>
                            <div class="meta-value">$500K – $40M</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Background -->
            <h2>Background</h2>
            <p><a href="https://www.linkedin.com/in/yokoli/">Yoko Li</a> is a Partner at <a href="https://a16z.com/">Andreessen Horowitz (a16z)</a> on the <a href="https://a16z.com/infra/">AI & Infrastructure team</a>. She brings deep technical credibility as a former product leader and engineer who still actively codes.</p>

            <h3>Career Highlights</h3>
            <ul>
                <li><strong><a href="https://www.hashicorp.com/">HashiCorp</a></strong>: Led product for <a href="https://developer.hashicorp.com/terraform">Terraform Cloud</a>, the infrastructure-as-code platform that became the standard for DevOps</li>
                <li><strong>Transposit</strong>: Founding Engineer/PM at this workflow automation startup</li>
                <li><strong><a href="https://www.appdynamics.com/">AppDynamics</a></strong>: Software engineer at the APM company that sold to Cisco for $3.7B</li>
                <li><strong>Education</strong>: <a href="https://www.rice.edu/">Rice University</a> (Engineering)</li>
            </ul>

            <h3>What Makes Her Unique</h3>
            <p>She maintains active open source projects including <a href="https://github.com/a16z-infra/ai-town">AI-town</a> (a virtual town where AI characters live and socialize) and <a href="https://github.com/ykhli/AI-tamago">AI-tamago</a> (an LLM-driven virtual pet). She's also known as a <a href="https://x.com/stuffyokodraws">technical cartoonist</a>. This combination of hands-on technical work and creative expression means she values founders who can both build and communicate.</p>
            <p>Read more: <a href="https://fly.io/blog/how-i-fly-yoko-li/">How Yoko Li makes towns, tamagoes, and tools for local AI</a></p>

            <!-- Investment Thesis -->
            <h2>Investment Thesis & Key Ideas</h2>

            <h3>Core Philosophy</h3>
            <p><em>"AI agents as the next computing platform"</em> — Not AI as tooling, but AI as the foundation for how software gets built.</p>
            <p>Source: <a href="https://a16z.com/nine-emerging-developer-patterns-for-the-ai-era/">Nine Emerging Developer Patterns for the AI Era</a> (May 2025)</p>

            <h3>Key Concepts She's Coined/Championed</h3>

            <h4>1. "Agent Experience (AX)" not just "Developer Experience (DX)"</h4>
            <ul>
                <li>Products should be designed for AI agents to use, not just humans</li>
                <li>APIs should be "agent-friendly" from day one</li>
            </ul>
            <p>Discussed in: <a href="https://a16z.com/podcast/automating-developer-email-with-mcp-and-al-agents/">Automating Developer Email with MCP and AI Agents</a> podcast with <a href="https://resend.com/">Resend</a> CEO Zeno Rocha</p>

            <h4>2. "Composable Service Primitives"</h4>
            <blockquote>
                <p>"Just like human developers lean on Stripe for payments, Clerk for auth, or Supabase for database capabilities, agents need similarly clean and composable service primitives to scaffold reliable applications."</p>
                <cite>— <a href="https://a16z.com/nine-emerging-developer-patterns-for-the-ai-era/">Nine Emerging Developer Patterns for the AI Era</a></cite>
            </blockquote>
            <p>Each company provides a discrete building block (auth, email, docs, workflows) that agents can reliably integrate.</p>

            <h4>3. Vertical Integration as Moat</h4>
            <ul>
                <li>As LLMs commoditize, owning the full stack creates defensibility</li>
                <li>Don't build middleware — own the complete experience</li>
            </ul>

            <h4>4. AI-Native Architecture (Not Bolt-On)</h4>
            <ul>
                <li>Recent focus on <a href="https://a16z.com/a-deep-dive-into-mcp-and-the-future-of-ai-tooling/">MCP (Model Context Protocol)</a> for connecting LLMs to tools</li>
                <li>Looking for companies rebuilt from ground up for AI, not legacy systems with AI added</li>
            </ul>
            <p>Deep dive: <a href="https://a16z.com/podcast/mcp-co-creator-on-the-next-wave-of-llm-innovation/">MCP Co-Creator on the Next Wave of LLM Innovation</a> podcast with Anthropic's David Soria Parra</p>

            <h4>5. Infrastructure Over Applications</h4>
            <ul>
                <li>Developer tools that solve hard technical problems</li>
                <li>Depth &gt; breadth; primitives &gt; features</li>
            </ul>

            <!-- Portfolio -->
            <h2>Portfolio Pattern Recognition</h2>

            <h3>What ALL Her Investments Share</h3>
            <table>
                <thead>
                    <tr><th>Pattern</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td>Developer-first</td><td>Developers are primary users</td></tr>
                    <tr><td>Vertically integrated</td><td>Own full experience, not plugins</td></tr>
                    <tr><td>Replace fragmented systems</td><td>Consolidate 5-10 legacy tools into one</td></tr>
                    <tr><td>JavaScript/TypeScript ecosystem</td><td>Modern web stack</td></tr>
                    <tr><td>Composable together</td><td><a href="https://clerk.com/">Clerk</a> + <a href="https://resend.com/">Resend</a> + <a href="https://mintlify.com/">Mintlify</a> work seamlessly</td></tr>
                    <tr><td>Increasingly AI-native</td><td>Designed for agent consumption</td></tr>
                </tbody>
            </table>

            <h3>Portfolio Companies — Quick Reference</h3>
            <table>
                <thead>
                    <tr><th>Investment</th><th>What It Does</th><th>Replaces</th><th>Link</th></tr>
                </thead>
                <tbody>
                    <tr><td><a href="https://clerk.com/">Clerk</a></td><td>Auth & user management</td><td>Auth0, Firebase Auth</td><td><a href="https://clerk.com/docs">Docs</a></td></tr>
                    <tr><td><a href="https://resend.com/">Resend</a></td><td>Email API for developers</td><td>SendGrid, Mailgun, AWS SES</td><td><a href="https://resend.com/docs/introduction">Docs</a></td></tr>
                    <tr><td><a href="https://mintlify.com/">Mintlify</a></td><td>AI-powered documentation</td><td>GitBook, ReadMe</td><td><a href="https://mintlify.com/docs">Docs</a></td></tr>
                    <tr><td><a href="https://www.inngest.com/">Inngest</a></td><td>AI workflow orchestration</td><td>Temporal, custom engines</td><td><a href="https://www.inngest.com/docs">Docs</a></td></tr>
                    <tr><td><a href="https://www.stainlessapi.com/">Stainless</a></td><td>SDK generation from OpenAPI</td><td>swagger-codegen</td><td><a href="https://docs.stainlessapi.com/">Docs</a></td></tr>
                    <tr><td><a href="https://www.svix.com/">Svix</a></td><td>Webhooks-as-a-service</td><td>Custom webhook infra</td><td><a href="https://docs.svix.com/">Docs</a></td></tr>
                    <tr><td><a href="https://upstash.com/">Upstash</a></td><td>Serverless Redis</td><td>ElastiCache, self-managed</td><td><a href="https://upstash.com/docs/introduction">Docs</a></td></tr>
                    <tr><td><a href="https://nx.dev/">Nx</a></td><td>Monorepo build tools</td><td>Lerna, custom scripts</td><td><a href="https://nx.dev/docs">Docs</a></td></tr>
                    <tr><td><a href="https://arcjet.com/">Arcjet</a></td><td>Developer security tools</td><td>WAFs, rate limiters</td><td><a href="https://docs.arcjet.com/">Docs</a></td></tr>
                </tbody>
            </table>
            <p><strong>Notable:</strong> <a href="https://www.svix.com/customers/clerk/">Clerk uses Svix</a> for their webhooks infrastructure — demonstrating how her portfolio companies compose together.</p>

            <!-- Recent Activity -->
            <h2>Recent Activity (Last 6 Months)</h2>

            <h3>Podcasts</h3>
            <table>
                <thead>
                    <tr><th>Date</th><th>Episode</th><th>Key Topics</th></tr>
                </thead>
                <tbody>
                    <tr><td>Dec 2024</td><td><a href="https://a16z.com/podcast/mcp-co-creator-on-the-next-wave-of-llm-innovation/">MCP Co-Creator on the Next Wave of LLM Innovation</a></td><td>MCP inception, connecting LLMs to external tools</td></tr>
                    <tr><td>Mar 2025</td><td><a href="https://a16z.com/podcast/automating-developer-email-with-mcp-and-al-agents/">Automating Developer Email with MCP and AI Agents</a></td><td>Agent Experience design, email for agents</td></tr>
                </tbody>
            </table>

            <h3>Articles</h3>
            <table>
                <thead>
                    <tr><th>Date</th><th>Article</th><th>Key Themes</th></tr>
                </thead>
                <tbody>
                    <tr><td>May 2025</td><td><a href="https://a16z.com/nine-emerging-developer-patterns-for-the-ai-era/">Nine Emerging Developer Patterns for the AI Era</a></td><td>Agents as platform, composable primitives</td></tr>
                    <tr><td>2025</td><td><a href="https://a16z.com/a-deep-dive-into-mcp-and-the-future-of-ai-tooling/">A Deep Dive Into MCP and the Future of AI Tooling</a></td><td>MCP technical architecture</td></tr>
                </tbody>
            </table>
            <p><strong>Current Focus:</strong> Actively seeking infrastructure that enables AI agents to compose reliable applications.</p>

            <!-- Positioning -->
            <h2>How to Position for This Investor</h2>

            <h3>The Framework</h3>
            <p>Position as <strong>infrastructure/primitive</strong>, not consumer app. Use her language:</p>
            <ul>
                <li>"Primitive" or "infrastructure" not "app"</li>
                <li>"Agent-native" not "AI-powered"</li>
                <li>Reference composability with her other portfolio companies</li>
            </ul>

            <h3>One-Liner Template</h3>
            <blockquote>
                <p>"We're building the [domain] primitive for AI agents — just as <a href="https://clerk.com/">Clerk</a> is the auth primitive and <a href="https://resend.com/">Resend</a> is the email primitive, [Company] is the [domain] primitive."</p>
            </blockquote>

            <h3>Why This Framework Works</h3>
            <ol>
                <li><strong>Primitive Framework</strong> — Speaks her language (see <a href="https://a16z.com/nine-emerging-developer-patterns-for-the-ai-era/">her article</a>)</li>
                <li><strong>Vertical Integration</strong> — Own full stack like all her investments</li>
                <li><strong>AI-Native</strong> — Built from ground up as agent-operated system</li>
                <li><strong>Developer DNA</strong> — Technical founders with domain expertise</li>
                <li><strong>Replaces Fragmented Systems</strong> — Legacy tools → one unified platform</li>
            </ol>

            <!-- Portfolio Analogies -->
            <h2>Key Portfolio Analogies to Use in Conversation</h2>

            <p><strong>When discussing vertical integration:</strong></p>
            <blockquote>
                <p>"It's like how <a href="https://resend.com/">Resend</a> doesn't just wrap SendGrid — they own the entire email sending experience end-to-end. We own the entire [domain] experience end-to-end."</p>
            </blockquote>

            <p><strong>When discussing developer experience:</strong></p>
            <blockquote>
                <p>"You led product at <a href="https://www.hashicorp.com/">HashiCorp</a> — you know <a href="https://developer.hashicorp.com/terraform">Terraform</a> succeeded because it abstracted away infrastructure complexity. We're doing the same for [domain]."</p>
            </blockquote>

            <p><strong>When discussing AI-native design:</strong></p>
            <blockquote>
                <p>"<a href="https://mintlify.com/">Mintlify</a> doesn't just add AI chat to docs — they designed docs from the ground up to be <a href="https://mintlify.com/ai-native-documentation-tool">agent-readable</a>. We designed [domain] from the ground up to be agent-operated."</p>
            </blockquote>

            <p><strong>When discussing production reliability:</strong></p>
            <blockquote>
                <p>"We've thought a lot about what <a href="https://www.inngest.com/">Inngest</a> solves — <a href="https://www.inngest.com/ai">running AI workflows reliably in production</a>. That's critical for us because [specific reason]. Here's our approach..."</p>
            </blockquote>

            <!-- Q&A -->
            <h2>Anticipated Questions & Counters</h2>

            <h3>Q1: "Why not sell to enterprises instead of B2C?"</h3>
            <p><strong>Counter:</strong> "We need real end-user behavioral data to train our AI. Enterprise deals would take 24 months and we'd be integrating with their legacy systems — that defeats the purpose of being AI-native. B2C gives us the fastest learning loop and proves unit economics. Same playbook as <a href="https://clerk.com/">Clerk</a> going from indie devs to enterprise."</p>

            <h3>Q2: "What's defensible? Can't [Big Tech + Incumbent] do this?"</h3>
            <p><strong>Counter:</strong> "Three moats: (1) Domain-specific data we're collecting 24/7 — no one else has this context, (2) Regulatory/technical barriers that take 12-18 months, (3) Incumbents can't reorganize around AI — classic innovator's dilemma. This is infrastructure that needs to be built from scratch."</p>

            <h3>Q3: "How do you handle LLM non-determinism in production?"</h3>
            <p><strong>Counter:</strong> "Great question — we run agents in a constrained environment with guardrails: circuit breakers, fallback logic, test suites. Similar to how <a href="https://www.inngest.com/blog/principles-of-production-ai">Inngest handles workflow reliability</a>, we've built observability and rollback into every agent action."</p>

            <h3>Q4: "Walk me through cohort retention economics"</h3>
            <p><strong>Counter:</strong> [Have detailed cohort data ready — month 1-12+ retention curves, ARPU trends, LTV calculation methodology]</p>

            <!-- Meeting Prep -->
            <h2>Meeting Prep Checklist</h2>

            <h3>Technical Deep Dive</h3>
            <ul class="checklist">
                <li>Architecture diagram</li>
                <li>How you handle LLM fallbacks/reliability (reference <a href="https://www.inngest.com/blog/principles-of-production-ai">Inngest's approach</a>)</li>
                <li>Data collection and privacy approach</li>
                <li>Integration architecture</li>
            </ul>

            <h3>Unit Economics</h3>
            <ul class="checklist">
                <li>Cohort analysis (month 1-12+ retention)</li>
                <li>CAC breakdown by channel</li>
                <li>ARPU trends over time</li>
                <li>LTV calculation methodology</li>
            </ul>

            <h3>Product Roadmap</h3>
            <ul class="checklist">
                <li>Next 3 product launches (with rationale)</li>
                <li>Key milestones timeline</li>
                <li>Platform/API launch timeline</li>
            </ul>

            <h3>The Ask</h3>
            <ul class="checklist">
                <li>How much capital for Series A</li>
                <li>What milestones it gets you to</li>
                <li>Who else is in the round</li>
                <li>Why a16z specifically (beyond Yoko)</li>
            </ul>

            <!-- Contact -->
            <h2>Contact & Links</h2>
            <table>
                <tbody>
                    <tr><td><strong>Email</strong></td><td><a href="mailto:yli@a16z.com">yli@a16z.com</a></td></tr>
                    <tr><td><strong>a16z Portfolio</strong></td><td><a href="https://a16z.com/author/yoko-li/">a16z.com/author/yoko-li/</a></td></tr>
                    <tr><td><strong>LinkedIn</strong></td><td><a href="https://www.linkedin.com/in/yokoli/">linkedin.com/in/yokoli/</a></td></tr>
                    <tr><td><strong>GitHub</strong></td><td><a href="https://github.com/ykhli">github.com/ykhli</a></td></tr>
                    <tr><td><strong>Twitter/X</strong></td><td><a href="https://x.com/stuffyokodraws">x.com/stuffyokodraws</a></td></tr>
                </tbody>
            </table>

            <!-- Company Positioning Section -->
            <h2>Company Positioning Analysis</h2>
            <p class="section-intro">Upload your company briefing to generate personalized positioning recommendations for this investor.</p>

            <div id="positioning-container">
                <!-- Upload State -->
                <div id="positioning-upload" class="positioning-state">
                    <div class="upload-zone" id="upload-zone">
                        <div class="upload-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                        </div>
                        <p class="upload-text">Drag and drop your company briefing here</p>
                        <p class="upload-subtext">or click to browse (PDF or DOCX, max 10MB)</p>
                        <input type="file" id="file-input" accept=".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document" hidden>
                    </div>
                    <div class="upload-form" id="upload-form" style="display: none;">
                        <div class="file-preview">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <span id="file-name"></span>
                            <button type="button" class="btn-remove" id="btn-remove-file">Remove</button>
                        </div>
                        <div class="form-group">
                            <label for="company-name">Company Name</label>
                            <input type="text" id="company-name" placeholder="Enter your company name" required>
                        </div>
                        <button type="button" class="btn-primary btn-upload" id="btn-upload">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="18" height="18">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                            </svg>
                            Upload & Analyze
                        </button>
                    </div>
                </div>

                <!-- Analyzing State -->
                <div id="positioning-analyzing" class="positioning-state" style="display: none;">
                    <div class="analyzing-container">
                        <div class="spinner"></div>
                        <p class="analyzing-text" id="analyzing-text">Uploading briefing...</p>
                        <p class="analyzing-subtext">This may take a minute while we analyze your company against the investor's thesis.</p>
                    </div>
                </div>

                <!-- Results State -->
                <div id="positioning-results" class="positioning-state" style="display: none;">
                    <div class="results-header">
                        <div class="results-meta">
                            <span class="company-badge" id="result-company-name"></span>
                            <span class="file-badge" id="result-filename"></span>
                        </div>
                        <div class="results-actions">
                            <button type="button" class="btn-secondary" id="btn-regenerate">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                </svg>
                                Regenerate
                            </button>
                            <button type="button" class="btn-secondary" id="btn-replace">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                </svg>
                                Replace Briefing
                            </button>
                        </div>
                    </div>

                    <!-- Alignment Score -->
                    <div class="score-card">
                        <div class="score-circle" id="score-circle">
                            <span class="score-value" id="score-value">--</span>
                        </div>
                        <div class="score-info">
                            <h4>Alignment Score</h4>
                            <p id="score-rationale"></p>
                        </div>
                    </div>

                    <!-- Executive Summary -->
                    <div class="result-section">
                        <h4>Executive Summary</h4>
                        <p id="executive-summary"></p>
                    </div>

                    <!-- Pitch Recommendations -->
                    <div class="result-section">
                        <h4>Recommended One-Liner</h4>
                        <blockquote id="one-liner"></blockquote>

                        <h4>Opening Hook</h4>
                        <p id="opening-hook"></p>

                        <h4>Key Messages to Emphasize</h4>
                        <ul id="key-messages"></ul>
                    </div>

                    <!-- Key Alignments -->
                    <div class="result-section">
                        <h4>Key Alignments</h4>
                        <div id="key-alignments"></div>
                    </div>

                    <!-- Portfolio Analogies -->
                    <div class="result-section">
                        <h4>Portfolio Analogies to Use</h4>
                        <div id="portfolio-analogies"></div>
                    </div>

                    <!-- Potential Concerns -->
                    <div class="result-section">
                        <h4>Potential Concerns & Mitigations</h4>
                        <div id="potential-concerns"></div>
                    </div>

                    <!-- Language Guidance -->
                    <div class="result-section">
                        <h4>Language Guidance</h4>
                        <div class="language-grid">
                            <div class="language-col">
                                <h5 class="label-use">Terms to Use</h5>
                                <div id="terms-to-use" class="tag-list"></div>
                            </div>
                            <div class="language-col">
                                <h5 class="label-avoid">Terms to Avoid</h5>
                                <div id="terms-to-avoid" class="tag-list"></div>
                            </div>
                        </div>
                        <h5>Framing Tips</h5>
                        <ul id="framing-tips"></ul>
                    </div>

                    <!-- Anticipated Questions -->
                    <div class="result-section">
                        <h4>Anticipated Questions</h4>
                        <div id="anticipated-questions"></div>
                    </div>

                    <!-- Next Steps -->
                    <div class="result-section">
                        <h4>Recommended Next Steps</h4>
                        <ul id="next-steps" class="checklist"></ul>
                    </div>
                </div>

                <!-- Error State -->
                <div id="positioning-error" class="positioning-state" style="display: none;">
                    <div class="error-container">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        <p class="error-text" id="error-text">An error occurred</p>
                        <button type="button" class="btn-primary" id="btn-try-again">Try Again</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        // Wrap tables in scrollable containers for mobile
        document.querySelectorAll('table').forEach(table => {
            const wrapper = document.createElement('div');
            wrapper.className = 'table-scroll';
            table.parentNode.insertBefore(wrapper, table);
            wrapper.appendChild(table);
        });

        function downloadPDF() {
            const element = document.getElementById('dossier-content');
            const btn = document.querySelector('.btn-download');
            const originalText = btn.innerHTML;

            btn.innerHTML = '<svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="animation: spin 1s linear infinite;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg> Generating...';
            btn.disabled = true;

            // Hide upload/analyzing states for PDF, show results if available
            const uploadState = document.getElementById('positioning-upload');
            const analyzingState = document.getElementById('positioning-analyzing');
            const errorState = document.getElementById('positioning-error');
            const resultsState = document.getElementById('positioning-results');
            const resultsActions = document.querySelector('.results-actions');

            const uploadDisplay = uploadState.style.display;
            const analyzingDisplay = analyzingState.style.display;
            const errorDisplay = errorState.style.display;

            uploadState.style.display = 'none';
            analyzingState.style.display = 'none';
            errorState.style.display = 'none';
            if (resultsActions) resultsActions.style.display = 'none';

            // Add PDF rendering class to fix overflow issues
            element.classList.add('pdf-rendering');

            const opt = {
                margin: [10, 15, 10, 15],
                filename: 'Yoko-Li-Investor-Dossier.pdf',
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    letterRendering: true,
                    scrollX: 0,
                    scrollY: 0,
                    windowWidth: element.scrollWidth,
                    windowHeight: element.scrollHeight,
                    onclone: function(clonedDoc) {
                        // Ensure all content is visible in the cloned document
                        const clonedElement = clonedDoc.getElementById('dossier-content');
                        if (clonedElement) {
                            clonedElement.style.height = 'auto';
                            clonedElement.style.overflow = 'visible';
                        }
                    }
                },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                pagebreak: {
                    mode: ['css', 'legacy'],
                    before: '.page-break-before',
                    after: '.page-break-after',
                    avoid: ['tr', 'blockquote', 'h2', 'h3', 'h4', 'h5', 'li', '.alignment-card', '.concern-card', '.question-card', '.analogy-card', '.score-card', '.score-info', '.result-section', '.language-grid', '.tag-list', '.mitigation', '.response']
                }
            };

            html2pdf().set(opt).from(element).save().then(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                element.classList.remove('pdf-rendering');
                // Restore states
                uploadState.style.display = uploadDisplay;
                analyzingState.style.display = analyzingDisplay;
                errorState.style.display = errorDisplay;
                if (resultsActions) resultsActions.style.display = '';
            }).catch(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                element.classList.remove('pdf-rendering');
                // Restore states
                uploadState.style.display = uploadDisplay;
                analyzingState.style.display = analyzingDisplay;
                errorState.style.display = errorDisplay;
                if (resultsActions) resultsActions.style.display = '';
                window.print();
            });
        }
    </script>
    <style>
        @keyframes spin { to { transform: rotate(360deg); } }
        @media print { .toolbar { display: none !important; } }
    </style>

    <script>
    // Company Positioning Feature
    (function() {
        const INVESTOR_SLUG = 'yoko-li';

        // DOM Elements
        const uploadState = document.getElementById('positioning-upload');
        const analyzingState = document.getElementById('positioning-analyzing');
        const resultsState = document.getElementById('positioning-results');
        const errorState = document.getElementById('positioning-error');

        const uploadZone = document.getElementById('upload-zone');
        const fileInput = document.getElementById('file-input');
        const uploadForm = document.getElementById('upload-form');
        const fileNameEl = document.getElementById('file-name');
        const companyNameInput = document.getElementById('company-name');

        const btnRemoveFile = document.getElementById('btn-remove-file');
        const btnUpload = document.getElementById('btn-upload');
        const btnRegenerate = document.getElementById('btn-regenerate');
        const btnReplace = document.getElementById('btn-replace');
        const btnTryAgain = document.getElementById('btn-try-again');

        const analyzingText = document.getElementById('analyzing-text');
        const errorText = document.getElementById('error-text');

        let selectedFile = null;
        let currentBriefingId = null;

        // State management
        function showState(state) {
            [uploadState, analyzingState, resultsState, errorState].forEach(el => {
                el.style.display = 'none';
            });
            state.style.display = 'block';
        }

        function showError(message) {
            errorText.textContent = message;
            showState(errorState);
        }

        // Check for existing briefing on page load
        async function checkExistingBriefing() {
            try {
                const res = await fetch(`/api/get-positioning?investorSlug=${INVESTOR_SLUG}`);
                const data = await res.json();

                if (data.success && data.hasBriefing && data.analysis) {
                    currentBriefingId = data.briefing.id;
                    displayResults(data.briefing, data.analysis);
                }
            } catch (err) {
                console.log('No existing briefing found');
            }
        }

        // File handling
        uploadZone.addEventListener('click', () => fileInput.click());

        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileSelect(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelect(e.target.files[0]);
            }
        });

        function handleFileSelect(file) {
            const validTypes = [
                'application/pdf',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
            ];
            const validExtensions = ['.pdf', '.docx'];
            const extension = file.name.toLowerCase().slice(file.name.lastIndexOf('.'));

            if (!validTypes.includes(file.type) && !validExtensions.includes(extension)) {
                alert('Please select a PDF or DOCX file.');
                return;
            }

            if (file.size > 10 * 1024 * 1024) {
                alert('File too large. Maximum size is 10MB.');
                return;
            }

            selectedFile = file;
            fileNameEl.textContent = file.name;
            uploadForm.style.display = 'block';
        }

        btnRemoveFile.addEventListener('click', () => {
            selectedFile = null;
            fileInput.value = '';
            uploadForm.style.display = 'none';
            companyNameInput.value = '';
        });

        btnUpload.addEventListener('click', async () => {
            if (!selectedFile) {
                alert('Please select a file.');
                return;
            }

            const companyName = companyNameInput.value.trim();
            if (!companyName) {
                alert('Please enter your company name.');
                companyNameInput.focus();
                return;
            }

            await uploadAndAnalyze(selectedFile, companyName);
        });

        async function uploadAndAnalyze(file, companyName) {
            showState(analyzingState);
            analyzingText.textContent = 'Uploading briefing...';

            try {
                // Upload the file
                const formData = new FormData();
                formData.append('file', file);
                formData.append('companyName', companyName);
                formData.append('investorSlug', INVESTOR_SLUG);

                const uploadRes = await fetch('/api/upload-briefing', {
                    method: 'POST',
                    body: formData
                });

                if (!uploadRes.ok) {
                    const error = await uploadRes.json();
                    throw new Error(error.error || 'Upload failed');
                }

                const uploadData = await uploadRes.json();
                currentBriefingId = uploadData.briefingId;

                // Analyze positioning
                analyzingText.textContent = 'Analyzing positioning against investor thesis...';

                const analyzeRes = await fetch('/api/analyze-positioning', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        briefingId: currentBriefingId,
                        investorSlug: INVESTOR_SLUG
                    })
                });

                if (!analyzeRes.ok) {
                    const error = await analyzeRes.json();
                    throw new Error(error.error || 'Analysis failed');
                }

                const analyzeData = await analyzeRes.json();

                // Display results
                displayResults({
                    companyName,
                    filename: file.name
                }, analyzeData.analysis);

            } catch (err) {
                console.error('Error:', err);
                showError(err.message || 'An error occurred. Please try again.');
            }
        }

        function displayResults(briefing, analysis) {
            // Update header
            document.getElementById('result-company-name').textContent = briefing.companyName;
            document.getElementById('result-filename').textContent = briefing.filename;

            // Score
            const score = analysis.alignmentScore || 0;
            document.getElementById('score-value').textContent = score;
            document.getElementById('score-rationale').textContent = analysis.alignmentRationale || '';

            // Color the score based on value
            const scoreCircle = document.getElementById('score-circle');
            if (score >= 70) {
                scoreCircle.style.background = 'linear-gradient(135deg, #dcfce7, #bbf7d0)';
            } else if (score >= 40) {
                scoreCircle.style.background = 'linear-gradient(135deg, #fef9c3, #fde68a)';
            } else {
                scoreCircle.style.background = 'linear-gradient(135deg, #fee2e2, #fecaca)';
            }

            // Executive Summary
            document.getElementById('executive-summary').textContent = analysis.executiveSummary || '';

            // Pitch Recommendations
            const pitch = analysis.pitchRecommendations || {};
            document.getElementById('one-liner').textContent = pitch.oneLiner || '';
            document.getElementById('opening-hook').textContent = pitch.openingHook || '';

            const keyMessages = document.getElementById('key-messages');
            keyMessages.innerHTML = (pitch.keyMessages || [])
                .map(msg => `<li>${escapeHtml(msg)}</li>`)
                .join('');

            // Key Alignments
            const alignmentsContainer = document.getElementById('key-alignments');
            alignmentsContainer.innerHTML = (analysis.keyAlignments || [])
                .map(a => `
                    <div class="alignment-card">
                        <h5>${escapeHtml(a.area)}</h5>
                        <p>${escapeHtml(a.explanation)}</p>
                        ${a.evidence ? `<p class="evidence">"${escapeHtml(a.evidence)}"</p>` : ''}
                    </div>
                `).join('');

            // Portfolio Analogies
            const analogiesContainer = document.getElementById('portfolio-analogies');
            analogiesContainer.innerHTML = (pitch.portfolioAnalogies || [])
                .map(a => `
                    <div class="analogy-card">
                        <h5>${escapeHtml(a.company)}</h5>
                        <p>${escapeHtml(a.analogy)}</p>
                    </div>
                `).join('');

            // Potential Concerns
            const concernsContainer = document.getElementById('potential-concerns');
            concernsContainer.innerHTML = (analysis.potentialConcerns || [])
                .map(c => `
                    <div class="concern-card">
                        <h5>${escapeHtml(c.concern)}</h5>
                        <div class="mitigation">
                            <p class="mitigation-label">Mitigation</p>
                            <p>${escapeHtml(c.mitigation)}</p>
                            ${c.talkingPoint ? `<p style="margin-top:8px;font-style:italic;">"${escapeHtml(c.talkingPoint)}"</p>` : ''}
                        </div>
                    </div>
                `).join('');

            // Language Guidance
            const lang = analysis.languageGuidance || {};

            const termsToUse = document.getElementById('terms-to-use');
            termsToUse.innerHTML = (lang.termsToUse || [])
                .map(t => `<span class="tag-use">${escapeHtml(t)}</span>`)
                .join('');

            const termsToAvoid = document.getElementById('terms-to-avoid');
            termsToAvoid.innerHTML = (lang.termsToAvoid || [])
                .map(t => `<span class="tag-avoid">${escapeHtml(t)}</span>`)
                .join('');

            const framingTips = document.getElementById('framing-tips');
            framingTips.innerHTML = (lang.framingTips || [])
                .map(tip => `<li>${escapeHtml(tip)}</li>`)
                .join('');

            // Anticipated Questions
            const questionsContainer = document.getElementById('anticipated-questions');
            questionsContainer.innerHTML = (analysis.anticipatedQuestions || [])
                .map(q => `
                    <div class="question-card">
                        <h5>"${escapeHtml(q.question)}"</h5>
                        <div class="response">
                            <p class="response-label">Suggested Response</p>
                            <p>${escapeHtml(q.suggestedResponse)}</p>
                            ${q.keyPoints && q.keyPoints.length > 0 ? `
                                <ul style="margin-top:8px;margin-bottom:0;">
                                    ${q.keyPoints.map(p => `<li>${escapeHtml(p)}</li>`).join('')}
                                </ul>
                            ` : ''}
                        </div>
                    </div>
                `).join('');

            // Next Steps
            const nextSteps = document.getElementById('next-steps');
            nextSteps.innerHTML = (analysis.nextSteps || [])
                .map(step => `<li>${escapeHtml(step)}</li>`)
                .join('');

            showState(resultsState);

            // Reset upload form
            selectedFile = null;
            fileInput.value = '';
            uploadForm.style.display = 'none';
            companyNameInput.value = '';
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Button handlers
        btnRegenerate.addEventListener('click', async () => {
            if (!currentBriefingId) {
                showError('No briefing to regenerate. Please upload a new briefing.');
                return;
            }

            showState(analyzingState);
            analyzingText.textContent = 'Regenerating positioning analysis...';

            try {
                const res = await fetch('/api/analyze-positioning', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        briefingId: currentBriefingId,
                        investorSlug: INVESTOR_SLUG
                    })
                });

                if (!res.ok) {
                    const error = await res.json();
                    throw new Error(error.error || 'Regeneration failed');
                }

                const data = await res.json();

                // Get current briefing info
                const getRes = await fetch(`/api/get-positioning?briefingId=${currentBriefingId}`);
                const briefingData = await getRes.json();

                displayResults(briefingData.briefing, data.analysis);

            } catch (err) {
                console.error('Error:', err);
                showError(err.message || 'Failed to regenerate. Please try again.');
            }
        });

        btnReplace.addEventListener('click', async () => {
            // Delete current briefing
            if (currentBriefingId) {
                try {
                    await fetch(`/api/delete-briefing?briefingId=${currentBriefingId}`, {
                        method: 'DELETE'
                    });
                } catch (err) {
                    console.log('Could not delete old briefing:', err);
                }
            }

            currentBriefingId = null;
            showState(uploadState);
        });

        btnTryAgain.addEventListener('click', () => {
            showState(uploadState);
        });

        // Initialize
        checkExistingBriefing();
    })();
    </script>
</body>
</html>
